@{
    // 取得 Session 中的登入使用者 ID
    var loggedUserId = ViewContext.HttpContext.Session.GetString(CDictionary.SK_LOGINED_USER_ID);
}
<!DOCTYPE html>
<html lang="zh-TW" class="h-100">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vege人 首頁</title>
    <link href="https://fonts.googleapis.com/css2?family=LXGW+WenKai+Mono+TC&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/2.5.1/uicons-regular-rounded/css/uicons-regular-rounded.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/site.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/2.2.2/css/dataTables.dataTables.min.css">
    <script src="https://unpkg.com/vue@3.2.45/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <!-- 導覽列 navbar Start-->
    <main class="flex-shrink-0 ">
        <header>
            <nav id="navbar" class="navbar navbar-expand-lg navbar-light shadow-sm fixed-top bg-white mb-3">
                <div class="container">
                    <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index">
                        <img src="~/images/VegeLogo.png" alt="Vege人" style="height: 100px;">
                    </a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                            data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                            aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mb-lg-0 mt-3">
                            <li class="nav-item me-4">
                                <a class="nav-link" href="/">首頁</a>
                            </li>
                            <li class="nav-item me-4">
                                <a class="nav-link" asp-area="" asp-controller="Product" asp-action="ProductList">產品列表</a>
                            </li>
                            <li class="nav-item me-4">
                                <a class="nav-link" asp-area="" asp-controller="Home" asp-action="About">關於我們</a>
                            </li>
                            <li class="nav-item me-4">
                                <a class="nav-link" asp-area="" asp-controller="Home" asp-action="Faq">常見問題</a>
                            </li>
                            <li class="nav-item me-4">
                                <a class="nav-link" asp-area="" asp-controller="ERP" asp-action="Index">ERP_TEST</a>
                            </li>
                        </ul>
                        <!-- 購物車 & 登入圖示 -->
                        <div class="d-flex d-none d-md-block nav-icon ms-auto">
                            <a href="javascript:;" data-bs-toggle="modal" data-bs-target="#contactUsModal">
                                <i class="bi bi-chat-fill fs-4 me-3"></i>
                            </a>
                            @if (TempData.Peek("IsLogIn") != null)
                            {
                                <a asp-controller="Customer" asp-action="Index">
                                    <i class="bi bi-person-fill fs-4 me-3"></i>
                                </a>
                            }
                            else
                            {
                                <a href="javascript:;" data-bs-toggle="modal" data-bs-target="#LoginModal">
                                    <i class="bi bi-person-fill fs-4 me-3"></i>
                                </a>
                            }
                            
                            @if (!string.IsNullOrEmpty(loggedUserId))
                            {
                                <a asp-action="Cart" asp-controller="Cart" role="button">
                                    <i class="bi bi-bag-fill fs-4 me-3"></i>
                                </a>
                            }
                            else
                            {
                                <a href="javascript:;" data-bs-toggle="modal" data-bs-target="#LoginModal" role="button">
                                    <i class="bi bi-bag-fill fs-4 me-3"></i>
                                </a>
                            }

                        </div>
                    </div>
                </div>
            </nav>
        </header>
        <div class=" container mt-5 pt-4">
            @RenderBody()
        </div>
    </main>

    <!-- footer Start-->
    <footer class="bg-primary py-4 mt-auto text-center text-white">
        <div class="container">
            <div class="row">
                <div class="col-6">
                    <div class="d-flex align-items-center" data-aos="fade-left">
                        <p class="text-start footer-logo mt-4 ps-4 pe-2 mb-0">VEGE_人</p>
                        <a class="fs-2 mt-4 ms-4" asp-controller="Social" asp-action="Facebook"><i class="bi bi-facebook footer-icon"></i></a>
                        <a class="fs-2 mt-4 ms-4" asp-controller="Social" asp-action="Instagram"><i class="bi bi-instagram footer-icon"></i></a>
                        <a class="fs-2 mt-4 ms-4" asp-controller="Social" asp-action="Map"><i class="bi bi-map-fill footer-icon"></i></a>
                    </div>
                    <div class="row text-start mt-5 pb-3">
                        <div class="col-4" data-aos="fade-left">
                            <div>
                                <a class="footer-title-link" asp-controller="Product" asp-action="ProductList">產品列表</a>
                            </div>
                            <div>
                                <a class="d-block footer-link my-4 mb-1 ps-1" asp-controller="Products" asp-action="Vegetables">好吃蔬菜</a>
                                <a class="d-block footer-link ps-1" asp-controller="Products" asp-action="Fruits">新鮮水果</a>
                            </div>
                        </div>
                        <div class="col-4" data-aos="fade-left" data-aos-duration="700">
                            <div>
                                <a class="footer-title-link" asp-controller="Home" asp-action="About">關於我們</a>
                            </div>
                            <div>
                                <a class="d-block footer-link my-4 mb-1 ps-1" asp-controller="Home" asp-action="About">我們的願景</a>
                                <a class="d-block footer-link mb-1 ps-1" asp-controller="About" asp-action="Team">團隊成員</a>
                                <a class="d-block footer-link mb-1 ps-1" asp-controller="About" asp-action="Rss">rss訂閱</a>
                            </div>
                        </div>
                        <div class="col-4" data-aos="fade-left" data-aos-duration="1000">
                            <div>
                                <a class="footer-title-link" asp-controller="Home" asp-action="Faq">常見問題</a>
                            </div>
                            <div>
                                <a class="d-block footer-link my-4 mb-1 ps-1" asp-controller="" asp-action="" data-bs-toggle="modal" data-bs-target="#contactUsModal">聯繫我們</a>
                                <a class="d-block footer-link mb-1 ps-1" asp-controller="Policy" asp-action="Refund">退款政策</a>
                                <a class="d-block footer-link mb-1 ps-1" asp-controller="Home" asp-action="Faq">FAQ</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6 d-flex align-items-end justify-content-end" data-aos="fade-up">
                    <img class="float-start pe-4 footer-icon" src="~/images/VegeLogoWhite.png" alt="Logo">
                </div>
            </div>
            <div class="row mt-4" data-aos="fade-left">
                <hr>
                <div class="col-3 text-start">Copyrgiht@GoodMorning</div>
                <div class="col-9"></div>
            </div>
        </div>
    </footer>
    <!-- footer End-->

    <!-- up to top btn-->
    <button onclick="topFunction()" id="up-to-top" title="Go to top"><i class="bi bi-arrow-up fs-3"></i></button>

    <!-- 聯絡我們 Start -->
    <div class="modal fade" id="contactUsModal" tabindex="-1" aria-labelledby="contactUsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="contactUsModalLabel">聯絡我們</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <div class="info-section">
                        <div class="mb-4">
                            <h5>電子信箱</h5>
                            <p>表單送出後，您的建議/問題會寄到這裡，我們將在三個工作日內回覆。</p>
                            <a href="mailto:VegeP2258@gmail.com" style="color: #464E19; text-decoration: none;">
                                <i class="bi bi-envelope-fill"></i> VegeP2258@gmail.com
                            </a>
                        </div>
                        <hr>
                        <div class="mb-4">
                            <h5>連絡電話</h5>
                            <p>平日 09:00-12:00。</p>
                            <a href="tel:0978446461" style="color: #464E19; text-decoration: none;">
                                <i class="bi bi-telephone-outbound-fill"></i> 0978-446-461
                            </a>、
                            <a href="tel:077255849,222" style="color: #464E19; text-decoration: none;">
                                07-7255849 轉 222
                            </a>
                        </div>
                        <hr>
                        <div class="mb-4">
                            <h5>公司地址</h5>
                            <p>平日 09:00-17:00，來辦公室坐坐 <i class="bi bi-cup-fill"></i></p>
                            <a href="https://maps.app.goo.gl/BPoJnKZRxsTiGLmY9" style="color: #464E19; text-decoration: none;"><i class="bi bi-geo"></i> 801 高雄市前金區中正四路211號8樓之1</a>
                        </div>
                        <hr>
                        <div class="mb-4">
                            <h5>社群</h5>
                            <p>歡迎關注我們的社群獲得最新消息！</p>
                            <a href="https://www.instagram.com/ispan_educate/" style="color: #464E19; text-decoration: none;"><i class="bi bi-instagram"></i> Vege人的Instagram</a>
                        </div>
                    </div>
                </div>

            </div>
         </div>
    </div>
    <!-- 聯絡我們 End-->



    <!-- 登入 Start -->

    <div class="modal fade" id="LoginModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content p-4">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">會員登入</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body pt-5">
                    <form asp-action="Login" asp-controller="Account" class="needs-validation" >
                        <input type="hidden" name="returnUrl" value="@Context.Request.Path" />

                        <!-- 帳號輸入框 -->
                        <div class="form-group mb-3">
                            @Html.TextBox("txtaccount", "", new
                                {
                                    @class = "form-control-login custom-input",
                                    placeholder = "請輸入帳號(email)",
                                    required = "required"
                                })
                        </div>

                        <div class="my-5"></div>

                        <!-- 密碼輸入框 -->
                        <div class="form-group mb-3">
                            @Html.Password("txtpassword", "", new
                                {
                                    @class = "form-control-login custom-input",
                                    placeholder = "請輸入密碼 ( 8-20 英數字 )",
                                    required = "required"
                                })
                        </div>

                        <!-- 記住我 & 忘記密碼 -->
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input me-1" id="rememberMe">
                                <label class="form-check-label" for="rememberMe">記住我</label>
                            </div>
                            <div class="d-flex">
                                <a asp-action="ForgotPassword" asp-controller="Account" class="me-3 text-decoration-none text-end">忘記密碼?</a>
                                <a asp-action="Register" asp-controller="Account" class="text-decoration-none text-end">立即註冊</a>
                            </div>
                        </div>

                        <!-- 登入按鈕 -->
                        <div class="text-center" style="margin-top: 80px;">
                            <input type="submit" value="登入" class="btn btn-primary w-100 mb-4">
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>
    <!-- 登入 End-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.14.1/jquery-ui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
    <script src="https://cdn.datatables.net/2.2.2/js/dataTables.min.js"></script>
    <script>
        $(function () {
            $("#datepicker").datepicker({
                changeMonth: true,
                changeYear: true,
                firstDay: 1,
                yearRange: "1900:2025"
            });
        });
    </script>
    <!--up to top-->
    <script>
        // Get the button:
        let mybutton = document.getElementById("up-to-top");

        // When the user scrolls down 20px from the top of the document, show the button
        window.onscroll = function () { scrollFunction() };

        function scrollFunction() {
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                mybutton.classList.add("show");
            } else {
                mybutton.classList.remove("show");
            }
        }

        // When the user clicks on the button, scroll to the top of the document
        function topFunction() {
            document.body.scrollTop = 0; // For Safari
            document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
        }
    </script>

    <!-- 選擇文字框時，隱藏 placeholder 文字-->
    <script>
        // 當文字框獲得焦點時，隱藏 placeholder 文字
        document.querySelectorAll('.form-control').forEach(input => {
            input.addEventListener('focus', function () {
                this.setAttribute('placeholder', ''); // 清除 placeholder
            });

            // 當文字框失去焦點時，顯示 placeholder 文字
            input.addEventListener('blur', function () {
                if (!this.value) {
                    this.setAttribute('placeholder', this.getAttribute('data-placeholder')); // 恢復 placeholder
                }
            });
        });
    </script>
    @{
        if (TempData.Peek("LoginFail") != null)
        {
                    <script>

                alert(@Json.Serialize(TempData["LoginFail"]));

                        var myModal = new bootstrap.Modal(document.getElementById('LoginModal'));
                        myModal.show();

                    </script>
        }
        @if (TempData.Peek("WelcomeMessage") != null)
        {
            <script>
                alert(@Json.Serialize(TempData["WelcomeMessage"]));
            </script>
        }
        @if (TempData.Peek("SuccessRegister") != null) // 註冊成功，顯示通知並跳轉
        {
            <script>
                alert('@Html.Raw(TempData["SuccessRegister"].ToString())');
            </script>
        }
        @if (TempData.Peek("LogoutMessage") != null) // 註冊成功，顯示通知並跳轉
        {
            <script>
                alert('@Html.Raw(TempData["LogoutMessage"].ToString())');
            </script>
        }
    }
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
          AOS.init();
        });
    </script>
     @await RenderSectionAsync("Scripts", required: false)
</body>
</html>